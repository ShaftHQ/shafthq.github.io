"use strict";(self.webpackChunkshaft_user_guide=self.webpackChunkshaft_user_guide||[]).push([[7870],{6080:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var n=s(5893),a=s(1151);const i={id:"Request_Builder",title:"Request Builder",sidebar_label:"Builder"},r=void 0,o={id:"Keywords/API/Request_Builder",title:"Request Builder",description:"SHAFT API",source:"@site/docs/Keywords/API/Request_Builder.md",sourceDirName:"Keywords/API",slug:"/Keywords/API/Request_Builder",permalink:"/docs/Keywords/API/Request_Builder",draft:!1,unlisted:!1,editUrl:"https://github.com/ShaftHQ/shafthq.github.io/blob/master/docs/Keywords/API/Request_Builder.md",tags:[],version:"current",frontMatter:{id:"Request_Builder",title:"Request Builder",sidebar_label:"Builder"},sidebar:"docs",previous:{title:"Using Cookies in Your Tests",permalink:"/docs/Keywords/GUI/didYouKnow/Using_Cookies_In_Your_Tests"},next:{title:"Parsing",permalink:"/docs/Keywords/API/Response_Getters"}},d={},l=[{value:"SHAFT API",id:"shaft-api",level:2},{value:"Request Builder",id:"request-builder",level:2},{value:"Request Method",id:"request-method",level:3},{value:"Get",id:"get",level:4},{value:"Post",id:"post",level:4},{value:"Put",id:"put",level:4},{value:"Patch",id:"patch",level:4},{value:"Delete",id:"delete",level:4},{value:"Set Authentication",id:"set-authentication",level:3},{value:"Authentication Type BASIC",id:"authentication-type-basic",level:4},{value:"Authentication Type FORM",id:"authentication-type-form",level:4},{value:"Add Cookie",id:"add-cookie",level:3},{value:"Set Target Status Code",id:"set-target-status-code",level:3},{value:"Set Content Type",id:"set-content-type",level:3},{value:"Add Header",id:"add-header",level:3},{value:"Set Request Body",id:"set-request-body",level:3},{value:"Body as String",id:"body-as-string",level:4},{value:"Body as Hash Map",id:"body-as-hash-map",level:4},{value:"Body as JSONObject",id:"body-as-jsonobject",level:4},{value:"Set Request Body From File",id:"set-request-body-from-file",level:3},{value:"Set Parameters",id:"set-parameters",level:3},{value:"Parameters Type FORM",id:"parameters-type-form",level:4},{value:"Parameters Type QUERY",id:"parameters-type-query",level:4},{value:"Set URL Arguments",id:"set-url-arguments",level:3},{value:"Add Config",id:"add-config",level:3},{value:"Enable URL Encoding",id:"enable-url-encoding",level:3},{value:"Use Relaxed HTTPS Validation",id:"use-relaxed-https-validation",level:3},{value:"Append Default Content Charset To Content Type If Undefined",id:"append-default-content-charset-to-content-type-if-undefined",level:3},{value:"<em>** *Please check the Response Validations as we can make many assertions and verifications on API response by using the Class RestValidationsBuilder* **</em>",id:"-please-check-the-response-validations-as-we-can-make-many-assertions-and-verifications-on-api-response-by-using-the-class-restvalidationsbuilder-",level:4},{value:"Sample Code Snippet",id:"sample-code-snippet",level:2}];function c(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,a.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"shaft-api",children:"SHAFT API"}),"\n",(0,n.jsx)(t.p,{children:"In order to interact with APIs, you need an instance of SHAFT.API class and give it the base serviceURI"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'import com.shaft.driver.SHAFT;\n\nSHAFT.API api = new SHAFT.API("https://jsonplaceholder.typicode.com");\n'})}),"\n",(0,n.jsx)(t.p,{children:"Now you have api object with the base serviceURI to start working with it with the Request Builder"}),"\n",(0,n.jsx)(t.h2,{id:"request-builder",children:"Request Builder"}),"\n",(0,n.jsxs)(t.p,{children:["Now you can start building your request with the request builder and add the methods you need from the below methods.\nFinally, you need to add the ",(0,n.jsx)(t.strong,{children:"perform()"})," method at the end to trigger the request and get back ",(0,n.jsx)(t.a,{href:"https://www.javadoc.io/doc/io.rest-assured/rest-assured/3.0.1/io/restassured/response/Response.html",children:"REST-Assured response"})," object to continue working with it when needed."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Note:"})," A request usually has only one of the following: urlArguments, parameters+type, or body"]}),"\n",(0,n.jsx)(t.h3,{id:"request-method",children:"Request Method"}),"\n",(0,n.jsx)(t.p,{children:"Add the request method and give it the serviceName"}),"\n",(0,n.jsx)(t.h4,{id:"get",children:"Get"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://jsonplaceholder.typicode.com");\napi.get("/posts").perform();\n'})}),"\n",(0,n.jsx)(t.h4,{id:"post",children:"Post"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://jsonplaceholder.typicode.com");\napi.post("/posts").perform();\n'})}),"\n",(0,n.jsx)(t.h4,{id:"put",children:"Put"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://jsonplaceholder.typicode.com");\napi.put("/posts/1").perform();\n'})}),"\n",(0,n.jsx)(t.h4,{id:"patch",children:"Patch"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://jsonplaceholder.typicode.com");\napi.patch("/posts/1").perform();\n'})}),"\n",(0,n.jsx)(t.h4,{id:"delete",children:"Delete"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://jsonplaceholder.typicode.com");\napi.delete("/posts/1").perform();\n'})}),"\n",(0,n.jsx)(t.h3,{id:"set-authentication",children:"Set Authentication"}),"\n",(0,n.jsx)(t.p,{children:"Set the authentication method that will be used by the API request that you're currently building. By default, this value is set to AuthenticationType.NONE but you can change it by calling this method. If you use thie method the authentication token will be saved automatically for all the following requests using the same session."}),"\n",(0,n.jsx)(t.h4,{id:"authentication-type-basic",children:"Authentication Type BASIC"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://postman-echo.com");\napi.get("/basic-auth").setAuthentication("postman", "password", AuthenticationType.BASIC).perform();\n'})}),"\n",(0,n.jsx)(t.h4,{id:"authentication-type-form",children:"Authentication Type FORM"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\napi.get("serviceName").setAuthentication("username", "password", AuthenticationType.FORM).perform();\n'})}),"\n",(0,n.jsx)(t.h3,{id:"add-cookie",children:"Add Cookie"}),"\n",(0,n.jsx)(t.p,{children:"Append a cookie to the current session to be used in the current and all the following requests. This feature is commonly used for authentication cookies."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\napi.post("serviceName").addCookie("session_id", "1234").perform();\n'})}),"\n",(0,n.jsx)(t.p,{children:"You can also use it directly without a request method to be used in all the following requests."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\napi.post("serviceName").perform();\napi.addCookie("session_id", "1234");\n'})}),"\n",(0,n.jsx)(t.h3,{id:"set-target-status-code",children:"Set Target Status Code"}),"\n",(0,n.jsxs)(t.p,{children:["Sets the expected target status code for the API request that you're currently building. By default, this value is set to 200, but you can change it by calling the ",(0,n.jsx)(t.strong,{children:"setTargetStatusCode"})," method."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://jsonplaceholder.typicode.com");\napi.get("/users").setTargetStatusCode(200).perform();\n'})}),"\n",(0,n.jsx)(t.h3,{id:"set-content-type",children:"Set Content Type"}),"\n",(0,n.jsxs)(t.p,{children:["Sets the content type for the API request that you're currently building.\nBy default, this value is set to ",(0,n.jsx)(t.strong,{children:"ContentType.ANY"})," but you can change it by calling the ",(0,n.jsx)(t.strong,{children:"setContentType"})," method and giving it the enum value you want."]}),"\n",(0,n.jsxs)(t.p,{children:["contentType Enumeration of common ",(0,n.jsx)(t.a,{href:"http://www.iana.org/assignments/media-types/media-types.xhtml",children:"IANA"})," content-types. This may be used to specify a request or response content-type more easily than specifying the full string each time. Example: ",(0,n.jsx)(t.strong,{children:"ContentType.JSON"})]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://jsonplaceholder.typicode.com");\napi.get("/users").setContentType("application/json").perform();\n'})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://jsonplaceholder.typicode.com");\napi.get("/users").setContentType(ContentType.JSON).perform();\n'})}),"\n",(0,n.jsx)(t.h3,{id:"add-header",children:"Add Header"}),"\n",(0,n.jsxs)(t.p,{children:["Append a header to the current session ",(0,n.jsx)(t.strong,{children:"to be used in the current and all the following requests"}),".\nThis feature is commonly used for authentication tokens and other global headers as you need"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\nString token = "@1234z"\napi.post("serviceName").addHeader("Authorization", "Bearer " + token).perform();\n'})}),"\n",(0,n.jsx)(t.p,{children:"You can add more than one header in the same request."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\nString token = "@1234z"\napi.post("serviceName").addHeader("Authorization", "Bearer " + token).addHeader("Accept-Charset", "utf-8").perform();\n'})}),"\n",(0,n.jsx)(t.p,{children:"You can also use it directly without a request method to set the header for all the following requests."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\napi.post("serviceName").perform();\napi.addHeader("Accept-Language", "en");\n'})}),"\n",(0,n.jsx)(t.h3,{id:"set-request-body",children:"Set Request Body"}),"\n",(0,n.jsx)(t.p,{children:"Sets the body (if any) for the API request that you're currently building."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\napi.post("serviceName").setRequestBody(body).perform();\n'})}),"\n",(0,n.jsx)(t.h4,{id:"body-as-string",children:"Body as String"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://reqres.in/");\nString body = """\n         {\n            "name": "adam",\n            "job": "engineer"\n        }""";\napi.post("api/users").setRequestBody(body).setContentType(ContentType.JSON).setTargetStatusCode(201).perform();\n'})}),"\n",(0,n.jsx)(t.h4,{id:"body-as-hash-map",children:"Body as Hash Map"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://reqres.in/");\nHashMap body = new HashMap<>();\nbody.put("name", "adam");\nbody.put("job", "engineer");\napi.post("api/users").setRequestBody(body).setContentType(ContentType.JSON).setTargetStatusCode(201).perform();\n'})}),"\n",(0,n.jsx)(t.h4,{id:"body-as-jsonobject",children:"Body as JSONObject"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://reqres.in/");\nJSONObject body = new JSONObject();\nbody.put("name", "adam");\nbody.put("job", "engineer");\napi.post("api/users").setRequestBody(body).setContentType(ContentType.JSON).setTargetStatusCode(201).perform();\n'})}),"\n",(0,n.jsx)(t.h3,{id:"set-request-body-from-file",children:"Set Request Body From File"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\napi.post("serviceName").setRequestBodyFromFile("relativeFilePath").perform();\n'})}),"\n",(0,n.jsx)(t.p,{children:'Having a request body as json file in this path "src/test/resources/testDataFiles/requestBody.json" like this:'}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{\n  "name": "morpheus",\n  "job": "leader"\n}\n'})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://reqres.in/");\napi.post("api/users").setRequestBodyFromFile("src/test/resources/testDataFiles/requestBody.json").setTargetStatusCode(201).setContentType(ContentType.JSON).perform();\n'})}),"\n",(0,n.jsx)(t.h3,{id:"set-parameters",children:"Set Parameters"}),"\n",(0,n.jsx)(t.p,{children:"Sets the parameters (if any) for the API request that you're currently building."}),"\n",(0,n.jsx)(t.h4,{id:"parameters-type-form",children:"Parameters Type FORM"}),"\n",(0,n.jsx)(t.p,{children:"Note that: Form parameter works with multipart/form-data requests."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\nList<List<Object>> parameters = Arrays.asList(Arrays.asList("username", "john"), Arrays.asList("password","1234"));\napi.post("serviceName").setParameters(parameters, RestActions.ParametersType.FORM).perform();\n'})}),"\n",(0,n.jsx)(t.h4,{id:"parameters-type-query",children:"Parameters Type QUERY"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\nList<List<Object>> parameters = Arrays.asList(Arrays.asList("search", "john"), Arrays.asList("orderBy","desc"));\napi.get("serviceName").setParameters(parameters, RestActions.ParametersType.QUERY).perform();\n'})}),"\n",(0,n.jsx)(t.h3,{id:"set-url-arguments",children:"Set URL Arguments"}),"\n",(0,n.jsx)(t.p,{children:"Sets the url arguments (if any) for the API request that you're currently building."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\napi.post("serviceName").setUrlArguments("username=john&password=1234").perform();\n'})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("https://jsonplaceholder.typicode.com");\napi.get("/comments").setUrlArguments("postId=1").setTargetStatusCode(201).perform();\n'})}),"\n",(0,n.jsx)(t.h3,{id:"add-config",children:"Add Config"}),"\n",(0,n.jsx)(t.p,{children:"Append a config to the current session to be used in the current and all the following requests."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\nRestAssured.config = RestAssured.config().redirect(RedirectConfig.redirectConfig().followRedirects(false));\napi.post("serviceName").addConfig(RestAssured.config).perform();\n'})}),"\n",(0,n.jsx)(t.p,{children:"You can also use it directly without a request method to be used for all the following requests."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\napi.post("serviceName");\nRestAssured.config = RestAssured.config().redirect(RedirectConfig.redirectConfig().followRedirects(false));\napi.addConfig(RestAssured.config).perform();\n'})}),"\n",(0,n.jsx)(t.h3,{id:"enable-url-encoding",children:"Enable URL Encoding"}),"\n",(0,n.jsx)(t.p,{children:"Tells whether REST Assured should automatically encode the URI if not defined explicitly. Note that this does not affect multipart form data. Default is true."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\napi.post("serviceName").enableUrlEncoding(false).perform();\n'})}),"\n",(0,n.jsx)(t.h3,{id:"use-relaxed-https-validation",children:"Use Relaxed HTTPS Validation"}),"\n",(0,n.jsx)(t.p,{children:"set useRelaxedHTTPSValidation configuration to trust all hosts regardless if the SSL certificate is invalid in the request builder 'SSL' is the protocol name by default"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\napi.get("serviceName").useRelaxedHTTPSValidation().perform();\n'})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\napi.get("serviceName").useRelaxedHTTPSValidation("SSL").perform();\n'})}),"\n",(0,n.jsx)(t.h3,{id:"append-default-content-charset-to-content-type-if-undefined",children:"Append Default Content Charset To Content Type If Undefined"}),"\n",(0,n.jsx)(t.p,{children:"Tells whether REST Assured should automatically append the content charset to the content-type header if not defined explicitly. Note that this does not affect multipart form data. Default is true."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'SHAFT.API api = new SHAFT.API("serviceURI");\napi.post("serviceName").appendDefaultContentCharsetToContentTypeIfUndefined(false).perform();\n'})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(t.h4,{id:"-please-check-the-response-validations-as-we-can-make-many-assertions-and-verifications-on-api-response-by-using-the-class-restvalidationsbuilder-",children:(0,n.jsxs)(t.em,{children:["** *Please check the ",(0,n.jsx)(t.a,{href:"https://shafthq.github.io/SHAFT_Engine_Docusaurus/docs/Response",children:"Response Validations"})," as we can make many assertions and verifications on API response by using the Class ",(0,n.jsx)(t.a,{href:"https://shafthq.github.io/SHAFT_ENGINE/apidocs/com/shaft/validation/RestValidationsBuilder.html",children:"RestValidationsBuilder"}),"* **"]})}),"\n",(0,n.jsx)(t.h2,{id:"sample-code-snippet",children:"Sample Code Snippet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'public class Test_Api {\n    SHAFT.API api;\n\n    @Test\n    public void test_get() {\n        api = new SHAFT.API("https://jsonplaceholder.typicode.com");\n        api.get("/users").perform();\n        api.assertThatResponse().extractedJsonValue("$[?(@.name==\'Chelsey Dietrich\')].id").isEqualTo("5").perform();\n    }\n    \n    @Test\n    public void test_post() {\n        api = new SHAFT.API("https://reqres.in/");\n        String body = """\n                {\n                    "name": "morpheus",\n                    "job": "leader"\n                }""";\n        api.post("api/users").setRequestBody(body).setTargetStatusCode(201).setContentType(ContentType.JSON).perform();\n        api.assertThatResponse().extractedJsonValue("name").isEqualTo("morpheus").withCustomReportMessage("Check that Morpheus exists.").perform();\n    }\n\n}\n'})})]})}function p(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},1151:(e,t,s)=>{s.d(t,{Z:()=>o,a:()=>r});var n=s(7294);const a={},i=n.createContext(a);function r(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);